# OpenFeature A/B Testing ë¦¬ì„œì¹˜

> **ì‘ì„±ì¼**: 2025-10-01
> **ëŒ€ìƒ í™˜ê²½**: OpenShift 4.x + Spring Boot 3.5.0

## ğŸ“‘ ëª©ì°¨

- [1. OpenFeature ê°œìš”](#1-openfeature-ê°œìš”)
- [2. OpenShift Service Mesh vs OpenFeature](#2-openshift-service-mesh-vs-openfeature)
- [3. OpenFeature ì•„í‚¤í…ì²˜](#3-openfeature-ì•„í‚¤í…ì²˜)
- [4. Provider ë¹„êµ](#4-provider-ë¹„êµ)
- [5. OpenShift ë°°í¬ íŒ¨í„´](#5-openshift-ë°°í¬-íŒ¨í„´)
- [6. A/B í…ŒìŠ¤íŠ¸ ì „ëµ](#6-ab-í…ŒìŠ¤íŠ¸-ì „ëµ)

---

## 1. OpenFeature ê°œìš”

### 1.1 OpenFeatureë€?

OpenFeatureëŠ” **ì˜¤í”ˆì†ŒìŠ¤ í”¼ì²˜ í”Œë˜ê·¸ í‘œì¤€**ìœ¼ë¡œ, ë²¤ë” ì¤‘ë¦½ì ì¸ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•**:
- âœ… **ë²¤ë” ì¤‘ë¦½**: ë‹¤ì–‘í•œ í”¼ì²˜ í”Œë˜ê·¸ ì œê³µìì™€ í†µí•© ê°€ëŠ¥
- âœ… **í‘œì¤€í™”ëœ API**: ì¼ê´€ëœ ê°œë°œ ê²½í—˜
- âœ… **í™•ì¥ ê°€ëŠ¥**: ì»¤ìŠ¤í…€ í”„ë¡œë°”ì´ë” êµ¬í˜„ ê°€ëŠ¥
- âœ… **ì˜¤í”ˆì†ŒìŠ¤**: Apache 2.0 ë¼ì´ì„ ìŠ¤
- âœ… **CNCF ì¸íë² ì´íŒ… í”„ë¡œì íŠ¸**: 2023ë…„ë¶€í„°

### 1.2 ì£¼ìš” ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application Code                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  OpenFeature SDK                         â”‚   â”‚
â”‚  â”‚  - Client API                            â”‚   â”‚
â”‚  â”‚  - Evaluation Context                    â”‚   â”‚
â”‚  â”‚  - Hooks                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Provider (flagd, LaunchDarkly, etc.)    â”‚   â”‚
â”‚  â”‚  - Flag Evaluation Engine                â”‚   â”‚
â”‚  â”‚  - Backend Connection                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Flag Storage   â”‚
         â”‚  - JSON File    â”‚
         â”‚  - Database     â”‚
         â”‚  - Remote API   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Java SDK ë²„ì „ ì •ë³´ (2025)

- **OpenFeature Java SDK**: v1.15.1
- **flagd Provider**: v0.11.10
- **ìµœì†Œ Java ë²„ì „**: Java 8+
- **Spring Boot í†µí•©**: ê³µì‹ ì§€ì›

---

## 2. OpenShift Service Mesh vs OpenFeature

### 2.1 ë¹„êµí‘œ

| í•­ëª© | Service Mesh (Istio) | OpenFeature |
|------|---------------------|-------------|
| **êµ¬í˜„ ë ˆë²¨** | ì¸í”„ë¼/ë„¤íŠ¸ì›Œí¬ ë ˆì´ì–´ | ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ |
| **ì½”ë“œ ë³€ê²½** | ìµœì†Œ ë˜ëŠ” ë¶ˆí•„ìš” | í•„ìš” (SDK í†µí•©) |
| **íŠ¸ë˜í”½ ì œì–´** | VirtualService + DestinationRule | Feature Flag í‰ê°€ ë¡œì§ |
| **ë¼ìš°íŒ… ê¸°ì¤€** | HTTP í—¤ë”, ê²½ë¡œ, ê°€ì¤‘ì¹˜ | ì‚¬ìš©ì ì†ì„±, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| **ì„¸ê·¸ë©˜í…Œì´ì…˜** | ì œí•œì  (ë„¤íŠ¸ì›Œí¬ ë ˆë²¨) | ê°•ë ¥í•¨ (ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨) |
| **ë¶€ë¶„ ê¸°ëŠ¥ í† ê¸€** | ë¶ˆê°€ëŠ¥ | ê°€ëŠ¥ (UI ìš”ì†Œë³„ ì œì–´) |
| **ë¡¤ë°± ì†ë„** | ì¦‰ì‹œ (YAML ìˆ˜ì •) | ì¦‰ì‹œ (CRD ìˆ˜ì •, ì¬ë°°í¬ ë¶ˆí•„ìš”) |
| **í•™ìŠµ ê³¡ì„ ** | ì¤‘ê°„~ë†’ìŒ | ë‚®ìŒ |
| **ìš´ì˜ ë³µì¡ë„** | ë†’ìŒ | ë‚®ìŒ |

### 2.2 ì¥ë‹¨ì  ë¶„ì„

#### Service Mesh ê¸°ë°˜ A/B í…ŒìŠ¤íŠ¸

**ì¥ì **:
- âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì™€ ì™„ì „ ë¶„ë¦¬
- âœ… ì¦‰ê°ì ì¸ íŠ¸ë˜í”½ ì „í™˜
- âœ… Kialië¡œ ì‹¤ì‹œê°„ ì‹œê°í™”
- âœ… ë¡¤ë°± ì¦‰ì‹œ ê°€ëŠ¥ (1ë¶„ ë‚´)
- âœ… ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ë™ì‹œ ì œì–´

**ë‹¨ì **:
- âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê¸°ë°˜ ì œì–´ ì–´ë ¤ì›€
- âŒ ë³µì¡í•œ ì‚¬ìš©ì ì„¸ê·¸ë©˜í…Œì´ì…˜ ì œí•œ
- âŒ ë¶€ë¶„ ê¸°ëŠ¥ í† ê¸€ ë¶ˆê°€ëŠ¥
- âŒ ë†’ì€ ìš´ì˜ ë³µì¡ë„
- âŒ ì¶”ê°€ ì¸í”„ë¼ í•„ìš” (Istio, Kiali ë“±)

#### OpenFeature ê¸°ë°˜ A/B í…ŒìŠ¤íŠ¸

**ì¥ì **:
- âœ… ì„¸ë°€í•œ ì‚¬ìš©ì ì„¸ê·¸ë©˜í…Œì´ì…˜
- âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê¸°ë°˜ ì œì–´
- âœ… ë¶€ë¶„ ê¸°ëŠ¥ í† ê¸€ ê°€ëŠ¥
- âœ… ë‹¤ì–‘í•œ í”„ë¡œë°”ì´ë” ì„ íƒ
- âœ… í‘œì¤€í™”ëœ API
- âœ… ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤ (flagd)

**ë‹¨ì **:
- âŒ ì½”ë“œ ìˆ˜ì • í•„ìš”
- âŒ SDK ì˜ì¡´ì„± ì¶”ê°€
- âŒ ì´ˆê¸° í•™ìŠµ í•„ìš”

### 2.3 ê¶Œì¥ ì‚¬í•­

**âœ¨ í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ ë°©ì‹ (Best Practice)**

```
Service Mesh (ì¸í”„ë¼ ë ˆì´ì–´)
    â†“ íŠ¸ë˜í”½ ë¼ìš°íŒ… & ë°°í¬ ì „ëµ (Canary, Blue/Green)
OpenFeature (ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´)
    â†“ ì„¸ë°€í•œ ê¸°ëŠ¥ ì œì–´ & A/B í…ŒìŠ¤íŠ¸
```

**Spring PetClinic í”„ë¡œì íŠ¸ì—ëŠ” OpenFeature ê¶Œì¥**:
- ë©”ì¸ í˜ì´ì§€ ë””ìì¸ A/B í…ŒìŠ¤íŠ¸ì— ìµœì 
- ì„¸ë°€í•œ ì‚¬ìš©ì ì„¸ê·¸ë©˜í…Œì´ì…˜ ê°€ëŠ¥
- ë‚®ì€ êµ¬í˜„ ë³µì¡ë„
- ë¹ ë¥¸ ì‹œì‘ ê°€ëŠ¥

---

## 3. OpenFeature ì•„í‚¤í…ì²˜

### 3.1 OpenShift í™˜ê²½ ë°°í¬ ëª¨ë¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 OpenShift Cluster                         â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  OpenFeature Operator (Namespace: openfeature-*)   â”‚  â”‚
â”‚  â”‚  - FeatureFlag CRD Controller                      â”‚  â”‚
â”‚  â”‚  - FeatureFlagSource CRD Controller                â”‚  â”‚
â”‚  â”‚  - Sidecar Injector                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Application Namespace (petclinic)                 â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Pod: spring-petclinic                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Spring Boot    â”‚  â”‚ flagd Sidecar     â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Container      â”‚â—„â”€â”¤ Container         â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                â”‚  â”‚                   â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Port: 8080     â”‚  â”‚ gRPC: 8013       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                â”‚  â”‚ HTTP: 8014       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  FeatureFlag CRD: welcome-flags              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  - welcome-page-redesign: 50/50 split        â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  FeatureFlagSource CRD: petclinic-flags      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  - source: petclinic/welcome-flags           â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Request Flow

```
1. ì‚¬ìš©ì ìš”ì²­
   â†“
2. OpenShift Route â†’ Service â†’ Pod
   â†“
3. Spring Boot Controller
   - OpenFeatureAPI.getClient()
   - client.getBooleanValue("welcome-page-redesign", false, context)
   â†“
4. flagd Provider â†’ flagd Sidecar (localhost:8013)
   â†“
5. flagd: Flag í‰ê°€
   - Targeting Rules í™•ì¸
   - Fractional ê³„ì‚° (50/50)
   - Variant ê²°ì • (on/off)
   â†“
6. ê²°ê³¼ ë°˜í™˜ (true/false)
   â†“
7. Controller: í…œí”Œë¦¿ ì„ íƒ (A ë˜ëŠ” B)
   â†“
8. Thymeleaf: HTML ë Œë”ë§
   â†“
9. ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ
```

### 3.3 Sidecar Injection ë©”ì»¤ë‹ˆì¦˜

OpenFeature Operatorê°€ Deploymentì— ë‹¤ìŒ ì–´ë…¸í…Œì´ì…˜ì„ ê°ì§€í•˜ë©´ ìë™ìœ¼ë¡œ flagd Sidecarë¥¼ ì£¼ì…í•©ë‹ˆë‹¤:

```yaml
metadata:
  annotations:
    openfeature.dev/enabled: "true"
    openfeature.dev/featureflagsource: "petclinic-flags"
```

**ì£¼ì… ê²°ê³¼**:
- flagd ì»¨í…Œì´ë„ˆ ì¶”ê°€
- Volume Mount ì„¤ì •
- í™˜ê²½ ë³€ìˆ˜ ì£¼ì…
- InitContainer (ì„ íƒì )

---

## 4. Provider ë¹„êµ

### 4.1 ì£¼ìš” Provider ë¹„êµí‘œ

| Provider | íƒ€ì… | SDK ì»¤ë²„ë¦¬ì§€ | OpenFeature ì¤€ìˆ˜ | ë¹„ìš© | ì¶”ì²œë„ |
|----------|------|-------------|-----------------|------|--------|
| **flagd** | ì˜¤í”ˆì†ŒìŠ¤ | 53% | 100% | ë¬´ë£Œ | â­â­â­â­â­ |
| **LaunchDarkly** | SaaS | 35% | ë†’ìŒ | ìœ ë£Œ ($$$) | â­â­â­â­ |
| **Split.io** | SaaS | 24% | ì¤‘ê°„ | ìœ ë£Œ ($$) | â­â­â­ |
| **DevCycle** | SaaS | - | 100% | ë¬´ë£Œ/ìœ ë£Œ | â­â­â­â­ |
| **GrowthBook** | ì˜¤í”ˆì†ŒìŠ¤/SaaS | - | ë†’ìŒ | ë¬´ë£Œ/ìœ ë£Œ | â­â­â­â­ |
| **Unleash** | ì˜¤í”ˆì†ŒìŠ¤/SaaS | - | ë†’ìŒ | ë¬´ë£Œ/ìœ ë£Œ | â­â­â­â­ |

### 4.2 flagd ìƒì„¸ ì •ë³´ (ê¶Œì¥)

**ì„ íƒ ì´ìœ **:
1. âœ… **OpenFeature ê³µì‹ êµ¬í˜„ì²´**: 100% ì‚¬ì–‘ ì¤€ìˆ˜
2. âœ… **ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤**: Apache 2.0 ë¼ì´ì„ ìŠ¤
3. âœ… **Kubernetes ë„¤ì´í‹°ë¸Œ**: Operator íŒ¨í„´
4. âœ… **ê²½ëŸ‰**: ë©”ëª¨ë¦¬ ~50MB, CPU ~0.1 core
5. âœ… **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: CRD ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜
6. âœ… **ê³ ê°€ìš©ì„±**: Sidecar íŒ¨í„´ìœ¼ë¡œ ì¥ì•  ê²©ë¦¬

**flagd íŠ¹ì§•**:
- **ì–¸ì–´**: Go
- **í”„ë¡œí† ì½œ**: gRPC, HTTP
- **Flag ì €ì¥ì†Œ**: Kubernetes CRD, JSON íŒŒì¼, HTTP, gRPC
- **í‰ê°€ ì—”ì§„**: JsonLogic ê¸°ë°˜
- **ëª¨ë‹ˆí„°ë§**: Prometheus ë©”íŠ¸ë¦­

**flagd vs ìƒìš© ì„œë¹„ìŠ¤**:

| ê¸°ëŠ¥ | flagd | LaunchDarkly | Split.io |
|------|-------|--------------|----------|
| ê°€ê²© | ë¬´ë£Œ | $8-150/ì›” | ë¬¸ì˜ í•„ìš” |
| ê´€ë¦¬ UI | âŒ (CRDë¡œ ê´€ë¦¬) | âœ… (ê°•ë ¥) | âœ… |
| ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ | âœ… | âœ… | âœ… |
| ë¶„ì„ ëŒ€ì‹œë³´ë“œ | âŒ (ì§ì ‘ êµ¬ì¶•) | âœ… | âœ… |
| A/B í…ŒìŠ¤íŠ¸ | âœ… | âœ… | âœ… |
| ë‹¤ì¤‘ í™˜ê²½ | âœ… | âœ… | âœ… |
| RBAC | Kubernetes RBAC | âœ… | âœ… |
| ê°ì‚¬ ë¡œê·¸ | âŒ | âœ… | âœ… |

**Spring PetClinicì—ëŠ” flagd ê¶Œì¥**:
- í•™ìŠµ ëª©ì : ë¬´ë£Œë¡œ OpenFeature ì²´í—˜
- OpenShift í™˜ê²½: Operatorë¡œ ì‰¬ìš´ ê´€ë¦¬
- ê°„ë‹¨í•œ A/B í…ŒìŠ¤íŠ¸: flagdë¡œ ì¶©ë¶„

---

## 5. OpenShift ë°°í¬ íŒ¨í„´

### 5.1 Sidecar íŒ¨í„´ (ê¶Œì¥)

```yaml
# Deployment with Sidecar Injection
apiVersion: apps/v1
kind: Deployment
metadata:
  name: spring-petclinic
  annotations:
    openfeature.dev/enabled: "true"          # Sidecar ì£¼ì… í™œì„±í™”
    openfeature.dev/featureflagsource: "petclinic-flags"
spec:
  template:
    spec:
      containers:
      - name: petclinic
        image: quay.io/your-org/spring-petclinic:latest
        ports:
        - containerPort: 8080
      # flagd SidecarëŠ” Operatorê°€ ìë™ ì£¼ì…
```

**ì¥ì **:
- âœ… ê° Podë§ˆë‹¤ ë…ë¦½ì ì¸ flagd ì¸ìŠ¤í„´ìŠ¤
- âœ… ë„¤íŠ¸ì›Œí¬ ë ˆì´í„´ì‹œ ìµœì†Œí™” (localhost í†µì‹ )
- âœ… ì¥ì•  ê²©ë¦¬ (í•œ Pod ì¥ì• ê°€ ë‹¤ë¥¸ Podì— ì˜í–¥ ì—†ìŒ)
- âœ… Operatorê°€ ìë™ ê´€ë¦¬

**ë‹¨ì **:
- âŒ Podë‹¹ ë¦¬ì†ŒìŠ¤ ì˜¤ë²„í—¤ë“œ (~50MB ë©”ëª¨ë¦¬, ~0.1 CPU)

### 5.2 ì¤‘ì•™í™” íŒ¨í„´

```yaml
# Standalone flagd Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: flagd
spec:
  replicas: 2
  template:
    spec:
      containers:
      - name: flagd
        image: ghcr.io/open-feature/flagd:latest
---
# Application connects to flagd Service
```

**ì¥ì **:
- âœ… ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì  (ê³µìœ  ì¸ìŠ¤í„´ìŠ¤)
- âœ… ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬

**ë‹¨ì **:
- âŒ ë„¤íŠ¸ì›Œí¬ ë ˆì´í„´ì‹œ ì¦ê°€
- âŒ SPOF (Single Point of Failure)
- âŒ í™•ì¥ì„± ì œí•œ

### 5.3 ê¶Œì¥ ë°°í¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OpenShift Project: petclinic                       â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Deployment: spring-petclinic (replicas: 2)  â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  Pod 1:                    Pod 2:            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ App     â”‚ â”‚ flagd  â”‚   â”‚ App     â”‚ ...   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Service: petclinic (ClusterIP)              â”‚ â”‚
â”‚  â”‚  Port: 8080 â†’ App Container                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Route: petclinic.apps.domain.com            â”‚ â”‚
â”‚  â”‚  TLS: Edge Termination                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FeatureFlag CRD: welcome-flags               â”‚ â”‚
â”‚  â”‚  - welcome-page-redesign                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. A/B í…ŒìŠ¤íŠ¸ ì „ëµ

### 6.1 ì‚¬ìš©ì ì„¸ê·¸ë©˜í…Œì´ì…˜ ë°©ë²•

#### 6.1.1 ëœë¤ ë¶„í•  (Fractional)

```yaml
targeting:
  if:
    - fractional:
      - var: targetingKey  # ì‚¬ìš©ì ID
      - - on: 50           # 50% â†’ B
        - off: 50          # 50% â†’ A
    - on
    - off
```

**íŠ¹ì§•**:
- ì‚¬ìš©ì ID ê¸°ë°˜ í•´ì‹±
- ì¼ê´€ì„± ë³´ì¥ (ë™ì¼ ì‚¬ìš©ìëŠ” í•­ìƒ ë™ì¼ variant)
- í†µê³„ì ìœ¼ë¡œ ê· ë“± ë¶„ë°°

#### 6.1.2 ì†ì„± ê¸°ë°˜ íƒ€ê²ŒíŒ…

```yaml
targeting:
  if:
    - ends_with:
      - var: email
      - "@company.com"
    - on                    # ë‚´ë¶€ ì§ì› â†’ B
    - if:
      - in:
        - var: country
        - ["KR", "JP"]
      - on                  # í•œêµ­/ì¼ë³¸ â†’ B
      - off                 # ë‚˜ë¨¸ì§€ â†’ A
```

**ì‚¬ìš© ì‚¬ë¡€**:
- ë‚´ë¶€ ì§ì› ë¨¼ì € í…ŒìŠ¤íŠ¸
- ì§€ì—­ë³„ ë¡¤ì•„ì›ƒ
- ë² íƒ€ í…ŒìŠ¤í„° ê·¸ë£¹

#### 6.1.3 ì ì§„ì  ë¡¤ì•„ì›ƒ

```yaml
# Week 1: 10%
targeting:
  if:
    - fractional:
      - var: targetingKey
      - - on: 10
        - off: 90
    - on
    - off

# Week 2: 50%
targeting:
  if:
    - fractional:
      - var: targetingKey
      - - on: 50
        - off: 50
    - on
    - off

# Week 3: 100%
defaultVariant: on
targeting: {}
```

### 6.2 Evaluation Context ì„¤ê³„

#### 6.2.1 í•„ìˆ˜ ì†ì„±

```java
EvaluationContext context = new MutableContext(userId)
    .add("email", user.getEmail())
    .add("country", getCountryFromIp(request))
    .add("userAgent", request.getHeader("User-Agent"))
    .add("timestamp", Instant.now().toString());
```

#### 6.2.2 ì„ íƒ ì†ì„±

```java
context
    .add("isNewUser", isNewUser(userId))
    .add("accountAge", getAccountAge(userId))
    .add("plan", user.getSubscriptionPlan())
    .add("device", detectDevice(request));
```

### 6.3 ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì „ëµ

#### 6.3.1 ê¸°ë³¸ ë©”íŠ¸ë¦­

- **ë…¸ì¶œ ìˆ˜**: ê° variant ë…¸ì¶œ íšŸìˆ˜
- **ì „í™˜ìœ¨**: ëª©í‘œ ë‹¬ì„± ë¹„ìœ¨ (ì˜ˆ: ë²„íŠ¼ í´ë¦­)
- **ì—ëŸ¬ìœ¨**: variantë³„ ì—ëŸ¬ ë°œìƒë¥ 
- **ì‘ë‹µ ì‹œê°„**: variantë³„ í˜ì´ì§€ ë¡œë”© ì‹œê°„

#### 6.3.2 ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­

- **ì‚¬ìš©ì ì²´ë¥˜ ì‹œê°„**: í˜ì´ì§€ ë¨¸ë¬¸ ì‹œê°„
- **ì´íƒˆë¥ **: ì¦‰ì‹œ ë‚˜ê°„ ì‚¬ìš©ì ë¹„ìœ¨
- **ë‹¤ìŒ ì•¡ì…˜**: "Find Owners" í´ë¦­ë¥ 

### 6.4 í†µê³„ì  ìœ ì˜ì„± ê²€ì¦

**ìµœì†Œ ìš”êµ¬ì‚¬í•­**:
- **ìƒ˜í”Œ ì‚¬ì´ì¦ˆ**: ê° variantë‹¹ ìµœì†Œ 1,000ëª…
- **í…ŒìŠ¤íŠ¸ ê¸°ê°„**: ìµœì†Œ 1ì£¼ì¼ (ì£¼ì¤‘/ì£¼ë§ í¬í•¨)
- **ì‹ ë¢° ìˆ˜ì¤€**: 95% (p-value < 0.05)
- **ê²€ì •ë ¥**: 80% (Î² = 0.2)

**ê³„ì‚° ë„êµ¬**:
- [Evan's Awesome A/B Tools](https://www.evanmiller.org/ab-testing/)
- [Optimizely Sample Size Calculator](https://www.optimizely.com/sample-size-calculator/)

---

## 7. ì„±ëŠ¥ ë° ë¦¬ì†ŒìŠ¤

### 7.1 flagd Sidecar ë¦¬ì†ŒìŠ¤

```yaml
resources:
  requests:
    memory: "32Mi"
    cpu: "50m"
  limits:
    memory: "64Mi"
    cpu: "100m"
```

### 7.2 ë ˆì´í„´ì‹œ

- **Flag í‰ê°€**: < 1ms (ë¡œì»¬ í‰ê°€)
- **gRPC í†µì‹ **: < 1ms (localhost)
- **ì „ì²´ ì˜¤ë²„í—¤ë“œ**: < 2ms

### 7.3 í™•ì¥ì„±

- **Sidecar íŒ¨í„´**: Pod ìˆ˜ì— ë¹„ë¡€í•˜ì—¬ í™•ì¥
- **ë™ì‹œ í‰ê°€**: ì œí•œ ì—†ìŒ (ë¡œì»¬ í‰ê°€)

---

## 8. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 8.1 í†µì‹  ë³´ì•ˆ

- **App â†” flagd**: localhost í†µì‹  (Pod ë‚´ë¶€)
- **flagd â†” Kubernetes API**: ServiceAccount Token ì‚¬ìš©
- **ì™¸ë¶€ ë…¸ì¶œ**: ì—†ìŒ (ClusterIP)

### 8.2 ì ‘ê·¼ ì œì–´

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: feature-flag-admin
rules:
- apiGroups: ["core.openfeature.dev"]
  resources: ["featureflags", "featureflagsources"]
  verbs: ["get", "list", "create", "update", "patch", "delete"]
```

### 8.3 ë¯¼ê° ì •ë³´

- âŒ Flagì— ë¹„ë°€ë²ˆí˜¸, API í‚¤ ì €ì¥ ê¸ˆì§€
- âœ… FlagëŠ” boolean, string, numberë§Œ ì‚¬ìš©
- âœ… ë¯¼ê°í•œ ì‚¬ìš©ì ì •ë³´ëŠ” í•´ì‹± í›„ targetingKeyë¡œ ì‚¬ìš©

---

## 9. ë‹¤ìŒ ë‹¨ê³„

1. âœ… **ë¦¬ì„œì¹˜ ì™„ë£Œ** (í˜„ì¬ ë¬¸ì„œ)
2. â­ï¸ **êµ¬í˜„ ê°€ì´ë“œ í™•ì¸**: [02-implementation-guide.md](02-implementation-guide.md)
3. â­ï¸ **ë°°í¬ ê°€ì´ë“œ í™•ì¸**: [03-deployment-guide.md](03-deployment-guide.md)
4. ğŸš€ **êµ¬í˜„ ì‹œì‘**

---

## ì°¸ê³  ìë£Œ

- [OpenFeature ê³µì‹ ë¬¸ì„œ](https://openfeature.dev/)
- [flagd ê³µì‹ ë¬¸ì„œ](https://flagd.dev/)
- [OpenFeature Java SDK](https://github.com/open-feature/java-sdk)
- [OpenFeature Operator](https://github.com/open-feature/open-feature-operator)
- [Spring Boot Tutorial](https://openfeature.dev/docs/tutorials/getting-started/java/spring-boot/)
